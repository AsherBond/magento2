<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright 2025 Adobe
  * All Rights Reserved.
  */
-->

<tests
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/testSchema.xsd">
    <test name="StorefrontVerifyPagerIsPresentOnViewOrderPageForGuestUsingOrdersAndReturnsTest">
        <annotations>
            <features value="Order"/>
            <stories value="Pager should be present on view order page if quantity of ordered products exceeds limit"/>
            <title value="Pager should be present on view order page"/>
            <description value="Verify Pager is present on View Order page for Guest using Orders and Returns functionality if qty of ordered products exceeds display limit"/>
            <severity value="MAJOR"/>
            <testCaseId value="AC-4415"/>
            <group value="Order"/>
        </annotations>
        <before>
            <!-- creating simple products -->
            <createData entity="ApiSimpleProduct" stepKey="createProduct1"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct2"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct3"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct4"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct5"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct6"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct7"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct8"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct9"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct10"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct11"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct12"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct13"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct14"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct15"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct16"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct17"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct18"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct19"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct20"/>
            <createData entity="ApiSimpleProduct" stepKey="createProduct21"/>
            <!-- Pre-condition 1,2: place an order with 21 products and with address information -->
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct1Page">
                <argument name="productUrl" value="$$createProduct1.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct1"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct2Page">
                <argument name="productUrl" value="$$createProduct2.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct2"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct3Page">
                <argument name="productUrl" value="$$createProduct3.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct3"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct4Page">
                <argument name="productUrl" value="$$createProduct4.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct4"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct5Page">
                <argument name="productUrl" value="$$createProduct5.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct5"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct6Page">
                <argument name="productUrl" value="$$createProduct6.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct6"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct7Page">
                <argument name="productUrl" value="$$createProduct7.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct7"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct8Page">
                <argument name="productUrl" value="$$createProduct8.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct8"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct9Page">
                <argument name="productUrl" value="$$createProduct9.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct9"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct10Page">
                <argument name="productUrl" value="$$createProduct10.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct10"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct11Page">
                <argument name="productUrl" value="$$createProduct11.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct11"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct12Page">
                <argument name="productUrl" value="$$createProduct12.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct12"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct13Page">
                <argument name="productUrl" value="$$createProduct13.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct13"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct14Page">
                <argument name="productUrl" value="$$createProduct14.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct14"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct15Page">
                <argument name="productUrl" value="$$createProduct15.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct15"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct16Page">
                <argument name="productUrl" value="$$createProduct16.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct16"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct17Page">
                <argument name="productUrl" value="$$createProduct17.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct17"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct18Page">
                <argument name="productUrl" value="$$createProduct18.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct18"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct19Page">
                <argument name="productUrl" value="$$createProduct19.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct19"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct20Page">
                <argument name="productUrl" value="$$createProduct20.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct20"/>
            <!-- Go to Product page-->
            <actionGroup ref="StorefrontOpenProductPageActionGroup" stepKey="openProduct21Page">
                <argument name="productUrl" value="$$createProduct21.custom_attributes[url_key]$$"/>
            </actionGroup>
            <!--Click on Add Product to Cart -->
            <actionGroup ref="StorefrontAddToTheCartActionGroup" stepKey="clickOnAddToCartButtonForProduct21"/>
            <!-- Guest Checkout Process-->
            <actionGroup ref="GoToCheckoutFromMinicartActionGroup" stepKey="guestGoToCheckoutFromMinicart"/>
            <actionGroup ref="GuestCheckoutFillingShippingSectionActionGroup" stepKey="guestCheckoutFillingShippingSection">
                <argument name="customerVar" value="CustomerEntityOne"/>
                <argument name="customerAddressVar" value="CustomerAddressSimple"/>
            </actionGroup>
            <actionGroup ref="CheckoutSelectCheckMoneyOrderPaymentActionGroup" stepKey="guestSelectCheckMoneyOrderPayment"/>
            <actionGroup ref="CheckBillingAddressInCheckoutActionGroup" stepKey="guestSeeAddress">
                <argument name="customerVar" value="CustomerEntityOne"/>
                <argument name="customerAddressVar" value="CustomerAddressSimple"/>
            </actionGroup>
            <actionGroup ref="CheckoutPlaceOrderActionGroup" stepKey="guestPlaceorder">
                <argument name="orderNumberMessage" value="CONST.successGuestCheckoutOrderNumberMessage"/>
                <argument name="emailYouMessage" value="CONST.successCheckoutEmailYouMessage"/>
            </actionGroup>
        </before>
        <after>
            <!-- deleting simple products,  -->
            <deleteData createDataKey="createProduct1" stepKey="deleteProduct1"/>
            <deleteData createDataKey="createProduct2" stepKey="deleteProduct2"/>
            <deleteData createDataKey="createProduct3" stepKey="deleteProduct3"/>
            <deleteData createDataKey="createProduct4" stepKey="deleteProductT4"/>
            <deleteData createDataKey="createProduct5" stepKey="deleteProduct5"/>
            <deleteData createDataKey="createProduct6" stepKey="deleteProduct6"/>
            <deleteData createDataKey="createProduct7" stepKey="deleteProduct7"/>
            <deleteData createDataKey="createProduct8" stepKey="deleteProduct8"/>
            <deleteData createDataKey="createProduct9" stepKey="deleteProduct9"/>
            <deleteData createDataKey="createProduct10" stepKey="deleteProduct10"/>
            <deleteData createDataKey="createProduct11" stepKey="deleteProduct11"/>
            <deleteData createDataKey="createProduct12" stepKey="deleteProduct12"/>
            <deleteData createDataKey="createProduct13" stepKey="deleteProduct13"/>
            <deleteData createDataKey="createProduct14" stepKey="deleteProduct14"/>
            <deleteData createDataKey="createProduct15" stepKey="deleteProduct15"/>
            <deleteData createDataKey="createProduct16" stepKey="deleteProduct16"/>
            <deleteData createDataKey="createProduct17" stepKey="deleteProduct17"/>
            <deleteData createDataKey="createProduct18" stepKey="deleteProduct18"/>
            <deleteData createDataKey="createProduct19" stepKey="deleteProduct19"/>
            <deleteData createDataKey="createProduct20" stepKey="deleteProduct20"/>
            <deleteData createDataKey="createProduct21" stepKey="deleteProduct21"/>
        </after>
        <!-- Get Order id -->
        <grabTextFrom selector="{{CheckoutSuccessMainSection.orderNumber}}" stepKey="grabOrderNumber"/>
        <!-- Step 1,2: Go to Storefront as Guest and Navigate to: Orders and Returns page -->
        <actionGroup ref="StorefrontOpenOrdersAndReturnsPageActionGroup" stepKey="goToOrdersAndReturnsPage"/>
        <waitForPageLoad stepKey="waiForStorefrontPage"/>
        <!-- Step 3: Fill the Form with address data form and precondition-->
        <actionGroup ref="StorefrontFillOrdersAndReturnsFormActionGroup" stepKey="fillOrder">
            <argument name="orderNumber" value="$grabOrderNumber"/>
            <argument name="customer" value="CustomerEntityOne"/>
        </actionGroup>
        <!-- Step 4:  Click on the "Continue" Button -->
        <click selector="{{StorefrontOrderAndReturnInformationSection.continueButton}}" stepKey="clickContinueButton"/>
        <waitForPageLoad stepKey="waitForPageLoad1"/>
        <!-- Step 4 Assertion: order has Pagers (Top and Bottom) and text "Items 1-20 of 21 total" are  present and 20 items present on the first page-->
        <waitForText userInput="{{OrdersPaginationData.pager}}" selector="{{StorefrontOrderAndReturnInformationSection.pagerAtTop}}" stepKey="seeTotalProductsAndNumberOfProductsPerPageAtTop"/>
        <waitForText userInput="{{OrdersPaginationData.pager}}" selector="{{StorefrontOrderAndReturnInformationSection.pagerAtBottom}}" stepKey="seePagerAtBottom"/>
    </test>
</tests>
